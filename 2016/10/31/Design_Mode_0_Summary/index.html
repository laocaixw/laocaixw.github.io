<html lang="zh-CN">
  <head><meta name="generator" content="Hexo 3.9.0">
    <title>设计模式学习系列（0）--概述及设计原则 - laocaixw</title>
    <meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<link href="/img/avatar.png" rel="shortcut icon">
<link href="undefined" rel="alternate" type="application/rss+xml">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>


  </head>
  <body>
    <header>
  <a id="go-back-home" href="/"><img src="/img/avatar.png" alt="Home" width="60" height="60"></a>
  <p>laocaixw</p>
  <p>Android Developer</p>
</header>

    <div id="container">
      <div class="block">
  
    <a class="main" href="/">Home</a>
  
    <a class="main" href="https://github.com/laocaixw">Github</a>
  
    <a class="main" href="mailto:laocaixw@163.com">Email</a>
  
    <a class="main" href="/about/">About</a>
  
    <a class="main" href="/atom.xml">RSS</a>
  
</div>

      <section class="paging">
  
    <div class="left">
      <a href="/2016/11/01/Android_Appium_Mixed_App/">
        ‹
      </a>
    </div>
  
  
    <div class="right">
      <a href="/2016/09/21/Android_NFC_Read_ICCard/">
        ›
      </a>
    </div>
  
</section>

      <div class="content">
        <section class="post">
          <h1>
            <div class="date">2016-10-31</div>
            设计模式学习系列（0）--概述及设计原则
          </h1>
          <blockquote>
          <p><strong><a href="http://blog.laocaixw.cn/">转载请声明出处</a></strong></p>
          </blockquote>
          <p>普通的程序员想要成长为一名高级工程师，一定要掌握设计模式。不能只知道吭哧吭哧地埋头写代码，应该要从全局的角度出发，去思考如何设计程序才会更容易扩展和维护。</p>
<p><em>就好比建筑行业，你是想当一名建筑设计师，还是想当一名只知道码砖的工人呢？这毋庸置疑。</em></p>
<p>所以，程序员想要成为高级工程师，就应该去了解设计模式，并且灵活并适当得将其应用到日常的工程设计中。</p>
<p>有一定开发经验的程序员应该都知道，开发语言都是相通的，只要把工程设计好了，具体的实现其实都是体力劳动。</p>
<p>设计模式是一套优秀的代码设计经验总结，主要目标是为了<strong>降低耦合</strong>，增强灵活性。想要掌握设计模式，首先要理解一个道理：<strong>面向接口编程</strong>，而不是面向实现。</p>
<p><em>举个例子，一台电脑是由主板、处理器、内存卡、显卡等部件组成，如果某一部分坏了，我们并不需要更换整个电脑，而是将其损坏的部件换掉，只要接口是一样的即可。软件设计其实也是一样的道理，这就是面向接口编程。</em></p>
<p><em>还是电脑的例子，部件和部件之间的关联就是耦合。当我们电脑需要升级更换内存的时候，如果内存需要接很多奇形怪状的连接线，那对非专业人士来说，升级更换的难度就太大了。所以，日常的开发工作中，一定要注意模块之间的耦合。</em></p>
<p>常用的设计模式总共有以下 23 种：</p>
<ul>
<li>创建型：单例模式、工厂方法模式、抽象工厂模式、建造者模式、原型模式；</li>
<li>结构型：代理模式、装饰模式、适配器模式、组合模式、桥梁模式、外观模式、享元模式；</li>
<li>行为型：模板方法模式、命令模式、责任链模式、策略模式、迭代器模式、中介模式、观察者模式、备忘录模式、访问者模式、状态模式、解释器模式。</li>
</ul>
<p><img src="https://laocaixw.gitee.io/img/design_mode/0_Summary.jpg" alt="Summary"></p>
<h2 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h2><p>要开发高质量的程序，一般要遵循以下六大原则。</p>
<h3 id="1-单一职责原则"><a href="#1-单一职责原则" class="headerlink" title="1.单一职责原则"></a>1.单一职责原则</h3><p><strong>一个类应当只有一个引起它变化的原因，即一个类应该只有一个职责。</strong> 这个应该很好理解，无需过多得解释，优点：</p>
<ol>
<li>降低类的复杂性；</li>
<li>提高代码的可读性；</li>
<li>提高代码的可维护性和可复用性；</li>
<li>降低因变更引起的风险。</li>
</ol>
<h3 id="2-里式替换原则"><a href="#2-里式替换原则" class="headerlink" title="2.里式替换原则"></a>2.里式替换原则</h3><p><strong>任何基类可以出现的地方，子类一定可以出现。</strong> 意思就是子类必须可以代替它的父类出现。通常，我们应该用父类（或接口）来指向子类的引用，这样，当我们需要变更实现的时候，只需要替换子类的引用即可。</p>
<p><em>举个例子，司机开车，而不是开奔驰，虽然这个车就是奔驰。当下次想把奔驰换成宝马的时候，司机还是开车，只是这个车现在指向了宝马。</em></p>
<p>面向对象的继承特性，就是遵循了里式替换原则的规范：</p>
<ol>
<li>子类必须完全实现父类的方法；</li>
<li>子类可以有自己的个性；</li>
<li>覆盖或实现父类的方法时输入参数可以被放大；</li>
<li>覆盖或实现父类的方法时输出结果可以被缩小。</li>
</ol>
<h3 id="3-依赖倒置原则"><a href="#3-依赖倒置原则" class="headerlink" title="3.依赖倒置原则"></a>3.依赖倒置原则</h3><p><strong>高层模块不应该依赖于低层模块，两者都应该依赖于抽象；抽象不应该依赖于细节，细节应该依赖于抽象。</strong> (这里的抽象可以是抽象类或者接口)</p>
<blockquote>
<p>依赖关系：A 依赖 B 的意思是，如果 A 要完成某一操作，必须使用B的某些操作来帮忙，才能完成。简言之，B 作为 A 的某个方法的方法参数存在。例如，汽车(B)能跑，司机(A)必须有汽车(B)开，才能算是司机，否则他只是个普通的人，所以司机(A)依赖汽车(B)。</p>
</blockquote>
<p>在项目中使用这个原则只要遵循以下几个规则：</p>
<ol>
<li>每个类尽量都具有接口或者抽象类，或者两者都有，这是依赖倒置的基本要求；</li>
<li>变量的表面类型尽量是接口或者抽象类；</li>
<li>任何类都不应该从具体类派生；</li>
<li>尽量不要重写基类的方法；</li>
<li>结合里式替换原则使用：接口负责定义抽象方法，并且声明与其他对象的依赖关系，抽象类负责公共构造部分的实现，实现类准确地实现业务逻辑，同时在适当的时候对父类进行细化。</li>
</ol>
<p>这其实就是“面向接口编程”的核心思想。</p>
<h3 id="4-接口隔离原则"><a href="#4-接口隔离原则" class="headerlink" title="4.接口隔离原则"></a>4.接口隔离原则</h3><p><strong>客户端不应该依赖它不需要的接口；一个类对另一个类的依赖应该建立在最小的接口上。</strong> 接口隔离原则跟单一职责原则有点像，一个是针对接口，一个是针对类，其实它们的思想是差不多的。</p>
<p>我们在设计程序的时候，应该尽量去建立多个单一模块的接口，不要去建立一个臃肿庞大的接口。接口要尽量的细化，同时接口中的方法要尽量少。这样，当程序要引进新的功能时，不会对太多功能造成影响。</p>
<p>接口隔离原则需要注意的：</p>
<ol>
<li>接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性，但是如果过小，则会造成接口数量过多，使设计复杂化，所以一定要适度。</li>
<li>为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系。</li>
<li>提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。</li>
</ol>
<h3 id="5-迪米特法则"><a href="#5-迪米特法则" class="headerlink" title="5.迪米特法则"></a>5.迪米特法则</h3><p><strong>迪米特法则又叫最少知识原则，意思是一个对象应当对其他对象尽可能少的了解。</strong> </p>
<p><em>举个简单的例子：如果 A 和 B 之间存在关联，B 和 C 之间存在关联，A 和 C 之间不存在关联。那么如果 A 想要调用 C 的方法，最好让 A 通过 B 去调用 C 的方法，而不是让 A 和 C 也关联起来。</em></p>
<p>好处显而易见，就是减少关联、降低耦合。</p>
<p>我们日常的开发中，一般能用 private 的地方，尽量都不会去用 public，就是遵循了迪米特法则。</p>
<h3 id="6-开闭原则"><a href="#6-开闭原则" class="headerlink" title="6.开闭原则"></a>6.开闭原则</h3><p><strong>对扩展开放，对修改关闭。</strong> </p>
<p>开闭原则的重要性可以通过以下几方面来体现：</p>
<ol>
<li>开闭原则提高可复用性。</li>
<li>开闭原则提高可维护性。</li>
<li>开闭原则提高灵活性。</li>
<li>开闭原则易于测试。</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总的来说，无论什么设计原则，都是为了让程序更容易维护，更容易扩展。只要我们在设计程序的时候多想想是不是更容易维护，更容易扩展，是不是符合这些设计原则，我们就可以写出更好更健壮的代码。</p>
<p>学习设计模式的过程中，可以多想想实际开发中，有哪些地方可以用到，这样可以更好地理解其中的思想。</p>
<p>学设计模式之前，可以先了解一下 UML 类图，以便更好理解某些内容。这里有个很容易理解的<a href="http://blog.csdn.net/xhf55555/article/details/6896316" target="_blank" rel="noopener">例子</a>。</p>

          
        </section>
      </div>
      
      
        <div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  // id: location.href, // 可选。默认为 location.href
  id: '设计模式学习系列（0）--概述及设计原则',
  owner: 'laocaixw', // 你的 GitHub ID
  repo: 'laocaixw.github.io', // 存储评论的 repo
  oauth: {
    client_id: 'b41a264d7724fd5a364b', // 你的 client ID
    client_secret: '9dc474e16291d40597b0ad55daae84c24eb41160', // 你的 client secret
  },
})
gitment.render('comment-container')
</script>
      
      <div class="block">
  
    <a class="main" href="/">Home</a>
  
    <a class="main" href="https://github.com/laocaixw">Github</a>
  
    <a class="main" href="mailto:laocaixw@163.com">Email</a>
  
    <a class="main" href="/about/">About</a>
  
    <a class="main" href="/atom.xml">RSS</a>
  
</div>

    </div>
    <footer>
  <span class="muted">&copy; laocaixw. All Rights Reserved.</span><br>
  <a href="https://github.com/saintwinkle/hexo-theme-scribble" class="muted">built with Hexo using Scribble theme</a>
  <br>
  <br>
</footer>

  </body>
</html>
